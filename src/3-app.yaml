name: tutorial-app-platform
static_sites:
- name: frontend
  github:
    repo: sciabarrado/tutorial-app-platform
    branch: main
    deploy_on_push: true
  source_dir: frontend
  build_command: npm run build
  routes:
  - path: /
databases:
- name: db
  engine: PG
  version: "12"
services:
- name: backend
  envs:
    - name: PGHOST
      scope: RUN_TIME
      value: ${db.HOSTNAME}
    - name: PGPORT
      scope: RUN_TIME
      value: ${db.PORT}
    - name: PGDATABASE
      scope: RUN_TIME
      value: ${db.DATABASE}
    - name: PGUSER
      scope: RUN_TIME
      value: ${db.USERNAME}
    - name: PGPASSWORD
      scope: RUN_TIME
      value: ${db.PASSWORD}
  github:
    repo: sciabarrado/tutorial-app-platform
    branch: main
    deploy_on_push: true
  run_command: node index.js
  source_dir: backend
  routes:
  - path: /api
